webpackJsonp([17],{795:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),u=a(n),o=r(128),c=a(o),s=r(860),d=r(846);t.default={namespace:"flowMapOne",state:{markers:0,loading:!1,totalFlow:""},effects:{fetchMarkers:c.default.mark(function e(t,r){var a,n,u,o,i=r.call,l=r.put;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({type:"addLoading"});case 2:return e.next=4,i(s.queryGateData);case 4:return a=e.sent,n=a.list,u=[],n.forEach(function(e){u.push(e.cross_id)}),e.next=10,i(d.queryTotalFlow,u);case 10:return o=e.sent,o.forEach(function(e){n.forEach(function(t,r){e._id===t.cross_id&&(n[r].totalFlow=Math.floor(e.totalFlow/2))})}),console.log(n),e.next=15,l({type:"saveMarkers",payload:n});case 15:return e.next=17,l({type:"saveTotal",payload:o});case 17:return e.next=19,l({type:"hideLoading"});case 19:case"end":return e.stop()}},e,this)}),fetchTotalFlow:c.default.mark(function e(t,r){var a,n=t.payload,u=r.call,o=r.put;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(d.queryTotalFlow,n);case 2:return a=e.sent,console.log(a),e.next=6,o({type:"saveTotal",payload:a.totalFlow});case 6:case"end":return e.stop()}},e,this)})},reducers:{saveTotal:function(e,t){return(0,u.default)({},e,{totalFlow:t.payload})},saveMarkers:function(e,t){return(0,u.default)({},e,{markers:t.payload})},addLoading:function(e){return(0,u.default)({},e,{loading:!0})},hideLoading:function(e){return(0,u.default)({},e,{loading:!1})}}},e.exports=t.default},846:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.queryTotalFlow=t.findHistory=t.findLaneNoById=t.queryRangeById=t.queryRangeByLaneAndTime=t.queryAllCrossID=t.queryLaneAndLastMinutes=t.queryLaneLastMinutes=t.queryCurrent=t.accountLogin=void 0;var n=r(128),u=a(n),o=r(318),c=a(o),s=(t.accountLogin=function(){var e=(0,c.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.default)(i+"/v1/user/login/account/"+t.userName+"/"+t.password,{method:"GET",mode:"cors",credentials:""}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.queryCurrent=function(){var e=(0,c.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.default)(i+"/v1/user/currentUser",{method:"GET",mode:"cors",credentials:""}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.queryLaneLastMinutes=function(){var e=(0,c.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.default)(i+"/v1/carflow/cross/"+t.cross_id+"/lane/"+t.lane+"/last/"+t.last,{method:"GET",mode:"cors",credentials:"",cache:"default"}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.queryLaneAndLastMinutes=function(){var e=(0,c.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.default)(i+"/v1/carflow/cross/"+t.cross_id+"/lane/"+t.lane+"/last_minutes/"+t.last_minutes,{method:"GET",mode:"cors",credentials:"",cache:"default"}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.queryAllCrossID=function(){var e=(0,c.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.default)(i+"/v1/carflow/allcrossid",{method:"GET",mode:"cors",credentials:"",cache:"default"}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.queryRangeByLaneAndTime=function(){var e=(0,c.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.default)(i+"/v1/carflow/cross/"+t.cross_id+"/lane/lanestart="+t.lane_start+"&laneend="+t.lane_end+"/start="+t.time_start+"&end="+t.time_end+"/"+t.currentPage,{method:"GET",mode:"cors",credentials:"",cache:"default"}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.queryRangeById=function(){var e=(0,c.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.default)(i+"/v1/carflow/cross/"+t.cross_id+"/start="+t.time_start+"&end="+t.time_end+"/"+t.currentPage,{method:"GET",mode:"cors",credentials:"",cache:"default"}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.findLaneNoById=function(){var e=(0,c.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.default)(i+"/v1/carflow/getlane/"+t,{method:"GET",mode:"cors",credentials:"",cache:"default"}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.findHistory=function(){var e=(0,c.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.default)(i+"/v1/carflow/cross/"+t.cross_id+"/lane/"+t.lane+"/history/"+t.date,{method:"GET",mode:"cors",credentials:"",cache:"default"}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.queryTotalFlow=function(){var e=(0,c.default)(u.default.mark(function e(t){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Headers,r.append("Content-Type","application/json"),e.abrupt("return",(0,d.default)(i+"/v1/carflow/cross/summary",{method:"POST",mode:"cors",credentials:"",body:t,headers:r,cache:"default"}));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),r(319)),d=a(s),i="http://localhost:4002/api/method=get&appkey=436etaq52e57a3cd028ab56b&seckey=sec-mj12Slu12w1Xs1er8ZzmGZqw5qrpFmqw25jHULr13eUZCswA"},860:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.findRoadNameById=t.deleteGateData=t.alterGateData=t.addGateData=t.queryGateData=void 0;var n=r(128),u=a(n),o=r(318),c=a(o),s=(t.queryGateData=function(){var e=(0,c.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.default)(i+"/v1/device/get_device",{method:"GET",mode:"cors",credentials:""}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.addGateData=function(){var e=(0,c.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.default)(i+"/v1/device/add_device/"+t.cross_id+"/"+t.road_name+"/"+t.longitude+"/"+t.latitude,{method:"GET",mode:"cors",credentials:""}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.alterGateData=function(){var e=(0,c.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.default)(i+"/v1/device/alter_device/"+t.cross_id+"/"+t.road_name+"/"+t.longitude+"/"+t.latitude,{method:"GET",mode:"cors",credentials:""}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.deleteGateData=function(){var e=(0,c.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.default)(i+"/v1/device/delete_device/"+t,{method:"GET",mode:"cors",credentials:""}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.findRoadNameById=function(){var e=(0,c.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.default)(i+"/v1/device/get_device_name/"+t,{method:"GET",mode:"cors",credentials:""}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),r(319)),d=a(s),i="http://localhost:4002/api/method=get&appkey=436etaq52e57a3cd028ab56b&seckey=sec-mj12Slu12w1Xs1er8ZzmGZqw5qrpFmqw25jHULr13eUZCswA"}});